<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="animate.css">
    <title>打字游戏</title>
    <style>
        html,body{
            margin: 0;
            /* height: 100%; */
        }
        body{
            /* 设置背景为径向渐变 默认为椭圆形circle*/
            background: radial-gradient(circle,#333,#222,#000);
            /* 线性渐变 */
            /* background: linear-gradient(); */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            
        }
        
        #char{
            color: greenyellow;
            font-size: 300px;
            text-shadow: 0px 0px 20px red;

        }

        #result{
            color: red;
            font-size: 40px;
        }
        
        #char.error{
            color: red;
            text-shadow: 0px 0px 20px greenyellow;
        }
    </style>
</head>
<body>
    <main>
        <div id="char" class="animated">H</div>
        <div id="result">正确个数:0,错误个数:0,正确率:100%</div>
    </main>

    <script src="jquery.js"></script>
    <script>
        var char = document.getElementById('char')
        var result = document.getElementById('result')
        
        var correct = 0
        var error = 0
        
        function showChar(){
            var random = Math.random() * 26
            random = Math.floor(random) + 65
            // 获取数字在ASCII表中所对应的字母
            var zimu = String.fromCharCode(random)
            char.innerText = zimu
        }

        // 1、获取键盘的事件
        // 2、对比按下的键 和 屏幕上显示的字母是否一致
        // 3、一致 出现随机字母，动画(添加类名), 正确率
        // 4、不一致 动画(添加类名) 动画 ，正确率

        
        /*
        //   方法一:

        window.onkeyup = function(e){  
            if(e.key.toUpperCase() == char.innerText){
                $('#char').addClass('zoomIn')
                showChar()
                // 延时0.3秒钟以后清除动画效果
                // 否则标签一直有之前的动画效果，那么就不再执行新的动画
                setTimeout(function(){$('#char').removeClass('zoomIn')},300)
                correct += 1
            }
            else{
                $('#char').addClass('shake')
                $('#char').css('color','red').css('text-shadow','0 0 20px greenyellow')
                setTimeout(function(){$('#char').removeClass('shake').css('color','greenyellow').css('text-shadow','0 0 20px red')},300)                 
                error += 1      
            }        
            var rate = Math.round(correct / (correct+error) * 100)
            $('#result').text('正确个数:'+ correct +',错误个数:'+ error +',正确率:'+rate+'%')         
        }
        */
        // 方法二:

        window.onkeyup = function(e){
            if(e.key.toUpperCase() == char.innerText){
                char.className = 'animated zoomIn'
                showChar()
                correct += 1 
                setTimeout(clearAnimation,300)
            }
            else{
                char.className = 'animated shake error'
                error += 1
                setTimeout(clearAnimation,300)
            }
            var rate = correct / (correct+error) * 100
            result.innerText = '正确个数:'+ correct +',错误个数:'+ error +',正确率:'+rate.toFixed(2)+'%'
        }
        function clearAnimation(){
            char.className = 'animated'
        }

        
    </script>
</body>
</html>